<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="styleSheet" href ="forex-tool.css">
  <title>Fxhubtools | Learn Forex Trading - Risk management tools </title>
</head>
<body>
<div class="index_banner">
  <h3>FXHubTools - Your Ultimate Forex Toolkit!</h3>
  <p>Learn forex trading,Get real-time trading insights, automated tools, and strategies to level up your trading game. Join now and start trading smarter!</p>
</div>


  <!-- Register form -->
  <form id="registerForm">

    <input type="text" id="name" placeholder="Name" required />
    <br><br>

    <input type="email" id="email" placeholder="Enter email" required />
    <br><br>

<div class= "input-group">
    <input type="password" id="password" placeholder="Enter password" required />
        <span class="toggle" onclick="togglePassword('password')">Show</span>
    <br><br>
</div>
    
    <label class="checkbox-container">
  I agree to the 
  <a href="terms.html" target="_blank">Terms of Service</a>  and 
  <a href="policy.html" target="_blank">Privacy Policy</a>
  <input type="checkbox" id = "checkbox" >
  <span class="checkmark"></span>
</label><br><br>
  
    <button type="submit" id="registerbutton">Register</button>
  </form>

  <div class="signin">
    If you already have an account. <a href="login.html">login</a>
  </div>
  <p id="message"></p>
  
  <div class="login-footer">
  <!-- Terms & Privacy -->
  <p class="terms">
    By Registering, you agree to our 
    <a href="terms.html" target="_blank">Terms</a> and 
    <a href="policy.html" target="_blank">Privacy Policy</a>.
  </p>

  <!-- Support Contact -->
  <p class="contact">
    Need help? <a href="mailto:support@fxhubtools.com">support@fxhubtools.com</a>
  </p>

  <!-- Social Handles -->
  <div class="social-links">
    <a href="https://facebook.com/fxhubtools" target="_blank">Facebook</a> | 
    <a href="https://twitter.com/fxhubtools" target="_blank">Twitter</a> | 
    <a href="https://discord.gg/yourdiscordlink" target="_blank">Discord</a>
  </div>
     
<script type="module">
  import { 
    initializeApp 
  } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-app.js";

  import { 
    getAuth, 
    createUserWithEmailAndPassword, 
    updateProfile 
  } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-auth.js";

  // ✅ Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyBgDV5rxlUUHNyk5VGaEqtIligZZupd7qU",
    authDomain: "forextools-c50c0.firebaseapp.com",
    projectId: "forextools-c50c0",
    storageBucket: "forextools-c50c0.firebasestorage.appspot",
    messagingSenderId: "600617054080",
    appId: "1:600617054080:web:7e4206f981ab4c9ba91b65",
    measurementId: "G-MK55ZT2RWQ"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  const registerForm = document.getElementById("registerForm");
  const messageBox = document.getElementById("message");

  // ✅ Register user and send data to backend (no email verification)
  registerForm.addEventListener("submit", async (e) => {
    e.preventDefault();

    const name = document.getElementById("name").value.trim();
    const email = document.getElementById("email").value.trim();
    const password = document.getElementById("password").value;
    const checkbox = document.getElementById("checkbox");

    if (!checkbox.checked) {
      alert("You must agree to the Terms and Privacy Policy before registering.");
      return;
    }

    try {
      // Create Firebase account
      const userCredential = await createUserWithEmailAndPassword(auth, email, password);
      const user = userCredential.user;

      // Set display name
      await updateProfile(user, { displayName: name });

      // ✅ Send user data to backend
      const res = await fetch("https://fxhubtools-backend.onrender.com/auth", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          name: name,
          email: email,
          uid: user.uid,
        }),
      });

      if (!res.ok) {
        const errData = await res.json();
        throw new Error(errData.message || "Failed to send user data to backend.");
      }

      messageBox.textContent = "✅ Registration successful!";
      messageBox.style.color = "green";
      messageBox.style.backgroundColor = "#f2fff2";
      messageBox.style.padding = "10px";
      messageBox.style.borderRadius = "6px";

      registerForm.reset();

      
       window.location.href = "./home.html";

    } catch (error) {
      console.error("Error:", error.message);

      let errorMessage = "Something went wrong. Please try again.";

      switch (error.code) {
        case "auth/email-already-in-use":
          errorMessage = "This email is already registered. Please login.";
          break;
        case "auth/invalid-email":
          errorMessage = "Invalid email format.";
          break;
        case "auth/weak-password":
          errorMessage = "Password must be at least 6 characters.";
          break;
        case "auth/network-request-failed":
          errorMessage = "Network error. Please check your internet connection.";
          break;
        default:
          errorMessage = error.message;
      }

      messageBox.textContent = "❌ " + errorMessage;
      messageBox.style.color = "red";
      messageBox.style.backgroundColor = "#f9f9f9";
      messageBox.style.padding = "8px 12px";
      messageBox.style.borderRadius = "6px";
    }
  });
    window.togglePassword = function(fieldId) {
      const input = document.getElementById(fieldId);
      const toggleBtn = input.nextElementSibling;
      if (input.type === "password") {
        input.type = "text";
        toggleBtn.textContent = "Hide";
      } else {
        input.type = "password";
        toggleBtn.textContent = "Show";
      }
    };
</script>
  
</body>
</html>
